<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml><head><meta charset=UTF-8><meta content="A little corner of the internet where I write about things I'm learning." name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ff7800 name=theme-color><meta content=#ffa348 media=(prefers-color-scheme:dark) name=theme-color><title>AI for the Shell - Caleb Trevatt</title><link href=https://calebtrevatt.com/blog/ai-for-the-shell/ rel=canonical><link href=https://calebtrevatt.com/favicon.png rel=icon type=image/png><link href=https://calebtrevatt.com/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='-.07em' y='.89em' font-size='90'%3Eüë®‚Äçüíª%3C/text%3E%3C/svg%3E" rel=icon><link title="Caleb Trevatt - RSS Feed" href=https://calebtrevatt.com/rss.xml rel=alternate type=application/rss+xml><link title="Caleb Trevatt - Atom Feed" href=https://calebtrevatt.com/atom.xml rel=alternate type=application/atom+xml><style>:root{--accent-color:#ff7800;--contrast-color:#fff}[data-theme=dark]{--accent-color:#ffa348}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--accent-color:#ffa348}}[data-theme=dark]{--contrast-color:#000c}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--contrast-color:#000c}}</style><link href=https://calebtrevatt.com/style.css rel=stylesheet><link href=https://calebtrevatt.com/mods.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=https://calebtrevatt.com/syntax-theme-light.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=https://calebtrevatt.com/syntax-theme-dark.css rel=stylesheet><script defer src=https://calebtrevatt.com/closable.js></script><script defer src=https://calebtrevatt.com/copy-button.js></script><script defer src=https://calebtrevatt.com/fuse.js></script><script defer src=https://calebtrevatt.com/search-fuse.js></script><script defer src=https://calebtrevatt.com/theme-switcher.js></script><meta content="Caleb Trevatt" property=og:site_name><meta content="AI for the Shell - Caleb Trevatt" property=og:title><meta content=https://calebtrevatt.com/blog/ai-for-the-shell/ property=og:url><meta content='Cross-platform, "pipable" AI directly in your terminal. Bring the power of LLMs to your local environment. ‚ö°Ô∏è' property=og:description><meta content=https://calebtrevatt.com/processed_images/cover.fcd5708ee9088910.jpg property=og:image><meta content=en_US property=og:locale><body><header id=site-nav><nav><a href=#main-content tabindex=0> Skip to Main Content </a><ul><li id=home><a href=https://calebtrevatt.com> <i class=icon></i>Caleb Trevatt</a><li class=divider><li><a href=https://calebtrevatt.com/blog/>Posts</a><li><a href=https://calebtrevatt.com/snippets/>Snippets</a><li id=search><button class=circle id=search-toggle title=Search><i class=icon></i></button><li id=theme-switcher><details class=closable><summary class=circle title=Theme><i class=icon></i></summary> <ul><li><button title="Switch to Light Theme" class=circle id=theme-light><i class=icon></i></button><li><button title="Switch to Dark Theme" class=circle id=theme-dark><i class=icon></i></button><li><button title="Use System Theme" class=circle id=theme-system><i class=icon></i></button></ul></details><li id=feed><details class=closable><summary class=circle title=Feed><i class=icon></i></summary> <ul><li><a href=https://calebtrevatt.com/rss.xml>RSS</a><li><a href=https://calebtrevatt.com/atom.xml>Atom</a></ul></details><li id=repo><a class=circle href=https://github.com/in03/calebs-corner title=Repository> <i class=icon></i> </a></ul></nav><div id=search-container><label class=visually-hidden for=search-bar>Search</label><input placeholder="Search for‚Ä¶" autocomplete=off disabled id=search-bar type=search><div id=search-results-container><div id=search-results></div></div></div></header><main id=main-content><article><div id=banner-container><img class=full-bleed id=banner src=https://calebtrevatt.com/blog/ai-for-the-shell/cover.jpg></div><div id=heading><p><small> <time datetime=" 2024-05-30T00:00:00+00:00">Published on May 30, 2024</time></small><h1>AI for the Shell</h1><p><small><span>7 minutes read</span><span> ‚Ä¢ </span></small><ul class=tags><li><a class=tag href=https://calebtrevatt.com/tags/ai/>AI</a><li><a class=tag href=https://calebtrevatt.com/tags/tool/>Tool</a><li><a class=tag href=https://calebtrevatt.com/tags/openai/>OpenAI</a><li><a class=tag href=https://calebtrevatt.com/tags/groq/>Groq</a></ul></div><div data-frameborder=no data-height=90 data-playerurl=https://elevenlabs.io/player/index.html data-publicuserid=58a370faa207aab914913711661d5e729f9ef9474fd25fa49a828517a41e3840 data-scrolling=no data-width=100% id=elevenlabs-audionative-widget>Loading the <a href=https://elevenlabs.io/text-to-speech rel=noopener target=_blank>Elevenlabs Text to Speech</a> AudioNative Player...</div><script src=https://elevenlabs.io/player/audioNativeHelper.js></script><div id=buttons-container><a title="Go to Top" href=#top id=go-to-top><i class=icon></i></a><a href="https://shareopenly.org/share/?url=https://calebtrevatt.com/blog/ai-for-the-shell/&text=Cross-platform%2C%20%22pipable%22%20AI%20directly%20in%20your%20terminal.%20Bring%20the%20power%20of%20LLMs%20to%20your%20local%20environment.%20%E2%9A%A1%EF%B8%8F" id=share title=Share><i class=icon></i></a><a title="File an Issue" href=https://github.com/in03/calebs-corner/issues id=issue><i class=icon></i></a></div><h2 id=what-is-it>What is it?</h2><p>AI integration is becoming ubiquitous. Warp is pioneering ‚Äúthe terminal of the future‚Äù with AI capabilities built-in. VS Code supports extensions like Github Copilot and Cody, while Zed includes Zed AI. But what if you need a simple, versatile tool to bring AI into any conversation? Checkout <strong>Mods</strong>. Charm‚Äôs dev team and community are on a roll, producing some awesome new apps and libraries, and this is no exception. üëÄ<p><img alt="Credit: Charmbracelet" src=https://calebtrevatt.com/blog/ai-for-the-shell/mods_img.png><p>Mods takes the concept of prompting a GPT and brings it to the command line. It even supports piping stdin and stdout! Any output from any command on your terminal, think <code>ls</code>, <code>cat</code>, <code>curl</code> and the like, can become input for Mods. Prompt it with some instructions on how to handle that data and you can either get rich feedback in your terminal or pipe the output for further processing.<p>Curious? Here are some examples!<hr><h2 id=examples>Examples</h2><h3 id=rich-markdown-output>Rich Markdown Output</h3><p>Mods supports rich colour and formatting out-of-the-box. Install Charm‚Äôs Glow, set the default output format to markdown and every response will be pretty. ‚ú®<p><img alt="Disclaimer: I don‚Äôt know anything about Pokemon üò¨" src=https://calebtrevatt.com/blog/ai-for-the-shell/pokemon.gif><h3 id=evaluate-script-security>Evaluate Script Security</h3><p>How about those inherently-unsafe one-liner shell script installers? Now finally safe with Mods! Here‚Äôs an example in WSL Ubuntu: <img alt="Easily get a second opinion on shell script safety." src=https://calebtrevatt.com/blog/ai-for-the-shell/oneliner.gif><h3 id=piping-github-api-data>Piping GitHub API Data</h3><p>Feed it raw JSON data from an API. Here it is running in good old Powershell 5 on Windows 10: <img alt="Shameless plug for my cheeky repo." src=https://calebtrevatt.com/blog/ai-for-the-shell/rate-repo.gif><h3 id=piping-to-text-to-speech>Piping to Text-to-Speech</h3><p>What about some text to speech? We can pipe stdout to a text to speech engine. Here‚Äôs a little example with Wsay, a Windows equivalent to ‚ÄúSay‚Äù on MacOS: <a href=https://github.com/p-groarke/wsay>https://github.com/p-groarke/wsay</a> <img alt="Duck haikus for life" src=https://calebtrevatt.com/blog/ai-for-the-shell/tts.gif><blockquote class=tip><p class=alert-title><i class=icon></i>Tip<p>It might be worth considering something a little more natural if you want it to read you bedtime stories. <a href=https://github.com/pndurette/gTTS>Google text-to-speech</a> might be a better option.</blockquote><audio controls><source src=tts_limerick.wav type=audio/wav> Your browser does not support the audio element.</audio><h3 id=calling-in-a-loop>Calling in a Loop</h3><p>You can even call it in a loop! This will ask for 10 fresh duck haikus. Each iteration is a new conversation. No conversational context; guaranteed freshness. üçÉ<pre class="language-powershell z-code" data-lang=powershell><code class=language-powershell data-lang=powershell><span class="z-source z-powershell"><span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> 10 ü¶Ü haikus straight to your speakers!<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span><span class="z-source z-powershell">
</span><span class="z-source z-powershell"><span class="z-constant z-numeric z-integer z-powershell">1</span><span class="z-keyword z-operator z-range z-powershell">..</span><span class="z-constant z-numeric z-integer z-powershell">10</span> <span class="z-keyword z-operator z-other z-powershell">|</span> <span class="z-keyword z-control z-powershell">%</span> <span class="z-meta z-scriptblock z-powershell"><span class="z-punctuation z-section z-braces z-begin z-powershell">{</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>Tell me a haiku about ducks<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span> <span class="z-keyword z-operator z-other z-powershell">|</span> mods <span class="z-keyword z-operator z-other z-powershell">|</span> wsay <span class="z-keyword z-operator z-assignment z-powershell">-</span>o duck_haiku<span class="z-support z-variable z-automatic z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>_<span class="z-variable z-other z-member z-powershell">.wav</span></span> <span class="z-punctuation z-section z-braces z-end z-powershell">}</span></span> 
</span></code></pre><p>And in Bash, like so:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash">    <span class="z-keyword z-control z-loop z-for z-shell">for</span><span class="z-meta z-group z-for z-shell"> i <span class="z-keyword z-control z-in z-shell">in</span> <span class="z-meta z-group z-expansion z-brace z-shell"><span class="z-punctuation z-section z-expansion z-brace z-begin z-shell">{</span>1..10<span class="z-punctuation z-section z-expansion z-brace z-end z-shell">}</span></span></span>
</span><span class="z-source z-shell z-bash">    <span class="z-keyword z-control z-loop z-do z-shell">do</span>
</span><span class="z-source z-shell z-bash">        <span class="z-meta z-function-call z-shell"><span class="z-support z-function z-echo z-shell">echo</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">"</span>Haiku time!<span class="z-punctuation z-definition z-string z-end z-shell">"</span></span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">mods</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">gtts-cli</span></span><span class="z-meta z-function-call z-arguments z-shell"> -<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>output</span> duck_haiku<span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">i</span></span>.mp3</span>
</span><span class="z-source z-shell z-bash">    <span class="z-keyword z-control z-loop z-end z-shell">done</span>
</span></code></pre><p>For more examples check out the official ones from <a href=https://github.com/charmbracelet/mods/blob/main/examples.md>the Mods repo</a><h2 id=multi-llm-support>Multi LLM Support</h2><p>Mods supports multiple Large Language Models (LLMs) through multiple providers. Providing an OpenAI API key gets you a pretty quick out-of-box experience. It‚Äôs already set up to use OpenAI‚Äôs GPT-4 by default.<p>Pop open the settings with:<p><code>mods --settings</code><p>Note, you‚Äôll have to define a default <code>$EDITOR</code> in your environment variables.<p>You‚Äôll be greeted with the <em>mods.yml</em> file. Check out the APIs section. Mods supports:<ul><li><p><strong>OpenAI</strong>: GPT-4O, GPT-4, GPT-3.5-Turbo, etc.</p><li><p><strong>Azure</strong>: GPT-4O, GPT-4, GPT-3.5-Turbo, etc.</p><li><p><strong>Perplexity AI</strong>: CodeLlama, Mistral, Claude 3, Sonar, etc.</p><li><p><strong>Groq</strong>: Mixtral, Llama 2, Llama 3, etc.</p><li><p><strong>RunPod</strong>: OpenChat, Ollama, etc (IaaS/SaaS)</p><li><p><strong>Local</strong>: Llama.cpp, GPT4ALL.cpp, etc. (local - GPU optional!)</p></ul><blockquote class=note><p class=alert-title><i class=icon></i>Note<p>Until today, I‚Äôd never tried Groq. Boy is it fast! Evidently, Groq provides <a href=https://www.semianalysis.com/p/groq-inference-tokenomics-speed-but>significantly faster inference</a> through next-gen hardware: Language Processing Units (LPUs).<p>API access is free, at least for now. I couldn‚Äôt find any official pricing anywhere. My guess is they‚Äôre relying on the free access to spread the word so they sell their chips üçüüí≤<p>Check it out: <a href="https://groq.com/?ref=ghost.notablegravity.com">https://groq.com</a></blockquote><pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml"><span class="z-comment z-line z-number-sign z-yaml"><span class="z-punctuation z-definition z-comment z-line z-number-sign z-yaml">#</span> Default model (gpt-3.5-turbo, gpt-4, ggml-gpt4all-j...).
</span></span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">default-model</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">gpt-4</span>
</span><span class="z-source z-yaml"><span class="z-entity z-other z-document z-end z-yaml">...</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">apis</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">openai</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">base-url</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">https://api.openai.com/v1</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">api-key</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">api-key-env</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">OPENAI_API_KEY</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">models</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">gpt-4</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">aliases</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">"</span>4<span class="z-punctuation z-definition z-string z-end z-yaml">"</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">max-input-chars</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">24500</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">fallback</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">gpt-3.5-turbo</span>
</span><span class="z-source z-yaml">      <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">gpt-4-1106-preview</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">aliases</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-sequence z-yaml"><span class="z-punctuation z-definition z-sequence z-begin z-yaml">[</span><span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">"</span>128k<span class="z-punctuation z-definition z-string z-end z-yaml">"</span></span><span class="z-punctuation z-definition z-sequence z-end z-yaml">]</span></span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">max-input-chars</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-constant z-numeric z-integer z-decimal z-yaml">392000</span>
</span><span class="z-source z-yaml">        <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">fallback</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">gpt-4</span>
</span><span class="z-source z-yaml"><span class="z-entity z-other z-document z-end z-yaml">...</span>
</span></code></pre><p>Configuration is the same for all providers. Provide the base url, desired models, and specify aliases for those models. If you want to use a specific model, call it like this:<p><code>"What is gravity?" | mods --model="Mixtral"</code><p>You can also supply <code>-M</code> or <code>--Ask-Model</code> to interactively choose a model (though this seems to be ignored if you pass a prompt non-interactively).<h2 id=conversational-memory>Conversational Memory</h2><p>Nice! Now when I was generating haikus I hard-sold amneisa as a feature for conversational freshness. What if we wanted to remember conversations across commands? Maybe with something more complicated‚Ä¶ Something that can‚Äôt be done ‚Äúzero-shot‚Äù?<p>Well thankfully Mods has some handy parameters that allow resuming and managing conversations:<pre class="language-yaml z-code" data-lang=yaml><code class=language-yaml data-lang=yaml><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-c, --continue       Continue from the last response or a given save title.</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-C, --continue-last  Continue from the last response.</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-l, --list           Lists saved conversations.</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-t, --title          Saves the current conversation with the given title.</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-d, --delete         Deletes a saved conversation with the given title or ID.</span>
</span><span class="z-source z-yaml">
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-s, --show           Show a saved conversation with the given title or ID.</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml">-S, --show-last      Show the last saved conversation.</span>
</span></code></pre><h3 id=a-really-heavy-example>A Really Heavy Example</h3><p>Here‚Äôs a PowerShell commandlet I made (along with 59 other functions necessary to make it work). I use it to provision temporary user accounts for student exams at my workplace.<p><code>New-Exam -D 10/03 -FT 8 -TT 11 -Alloc 105 -U 5 -CC "10SCI"</code><p>My bespoke exam provisioning commandlet<p>For the sake of your screen real-estate I‚Äôve used the parameter aliases, but I will explain in a moment!<p>Essentially this commandlet:<ul><li><p>Sets Active Directory account logon hours</p><li><p>Sets account expiration time</p><li><p>Sets group membership (for exam conditions)</p><li><p>Validates users by name or student ID and fetches AD attributes</p><li><p>Populates an HTML login sheet template with user data and exam details</p><li><p>Merges the sheets into a PDF</p></ul><p>And it saves me <strong>HOURS.</strong><p>But one thing remains that sucks like a parasite at my remaining time and brain power:<p><strong>The exam login requests themselves.</strong><p>The problem is that login reqeuests aren‚Äôt consistent. Requests come in all shapes and sizes. Some come with multiple updates across a chain of emails. Some come in concise bullet points. Some say ‚Äúnext Wednesday‚Äù. Others say ‚Äú19/05/2024‚Äù.<p>What an excellent opportunity for AI ‚Äì and for Mods!<h4 id=interfacing-with-the-commandlet>Interfacing with the Commandlet</h4><p>So first I told Mods how to commandlet. works and the inputs and outputs I expect:<pre class="language-powershell z-code" data-lang=powershell><code class=language-powershell data-lang=powershell><span class="z-source z-powershell">
</span><span class="z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>Instructions</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>New-Exam is a powershell commandlet.
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> It is used to create temporary Active Directory accounts for exams.
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Here's an example:
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> New-Exam -D 10/03 -FT 8 -TT 11 -U 5 -S <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>10SCI<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span> -C
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> -D is <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>date<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> -FT is <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span><span class="z-keyword z-control z-powershell">from</span> time<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> -TT is <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>to time<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> -U is <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>user count<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> -S is <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>subject<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> -C is <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>conditions<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span> (do not include)
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Follow the format of the example.
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Output the exact command to run, no extra information or context.
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> If data is missing or invalid, output:
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> 'echo <span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>Invalid <span class="z-keyword z-control z-powershell">data</span>: <span class="z-constant z-numeric z-integer z-powershell">___</span><span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span> 
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> where blank is the invalid or missing data.
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>Instructions</span> | mods --title=<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>New Exam<span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>
</span></span></code></pre><blockquote class=note><p class=alert-title><i class=icon></i>Note<p>‚ÄúConditions‚Äù above I asked it not to include. The conditions aren‚Äôt difficult to pass, but for the sake of experimentation I left them out. Fortunately, if a mandatory parameter is left out of a PowerShell commandlet it will be prompted at runtime. Good to know!</blockquote><h4 id=pushing-jobs>Pushing Jobs</h4><p>Then I gave it an exam login request email.<pre class="language-powershell z-code" data-lang=powershell><code class=language-powershell data-lang=powershell><span class="z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>Message</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>Hi IT team!
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> We have a science exam on tomorrow.
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> 
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Please can we have four logins?
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> - Disable internet
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> - No USB access
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> - They can have spellcheck
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Start: 10:30, Finish: 12PM
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Kind regards,
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">>
</span></span><span class="z-source z-powershell"><span class="z-string z-quoted z-double z-powershell">> Dane Joe<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span><span class="z-source z-powershell">
</span><span class="z-source z-powershell">$ Message <span class="z-keyword z-operator z-other z-powershell">|</span> mods <span class="z-keyword z-operator z-assignment z-powershell">-</span><span class="z-keyword z-operator z-assignment z-powershell">-</span>continue<span class="z-keyword z-operator z-assignment z-powershell">=</span><span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>New Exam<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span> <span class="z-keyword z-operator z-other z-powershell">|</span> <span class="z-support z-function z-powershell">Invoke-Expression</span>
</span></code></pre><h4 id=retrospect>Retrospect</h4><p>Running the commandlet is now as easy as ‚Äúcontinuing‚Äù the conversation with the previous context (the instructions) and piping it to PowerShell‚Äôs Invoke-Expression. Super easy!<p>I actually have a lot of validation built into the commandlet. Like what if the exam is on a Saturday? Shouldn‚Äôt happen. What if the subject is only offered in grade 12 and a grade 10 student is taking it? Shouldn‚Äôt happen.<p>I‚Äôm a little wonky about trusting validation to the mysterious <em>Latent Space</em>. Getting different answers to the same question asked twice makes me a little twitchy‚Ä¶ But technically all of those validation rules could be applied at the prompt context level instead.<p>Could this all be solved with a simple HTML form? Definitely! Yes.<p>Should it? Mmhmm. Probably!<p>As a general rule, if you want automation to produce consistently reliable outputs, you need consistently reliable inputs. AI ‚Äúmagics‚Äù away some of this, but it still requires some massaging and testing.<p>In a situation like this, if a user form was not an option, it would be a great candidate for an AI flow in LangChain or Flowise. I‚Äôm hoping to take a look at these soon!<h2 id=wrapping-up>Wrapping Up</h2><p>Mods is a great bridge between AI LLMs great demo of some cheap ad-hoc glue to try things out. Great for protyping, proof-of-concept, or ad-hoc formatting/parsing/sorting and the like. Perfect for someone like me who frequently gets caught up on the implementation details. With mods I can rapidly prototype in English, adjusting for desired behaviour with additional prompts. Once I‚Äôve got a proof of concept, I can lay down something more solid.<p>If an HTTP form This is actually a great use case for LangChain or Flowise. Hoping to take a look at these soon!</article><hr><nav id=post-nav><a class="post-nav-item post-nav-next" href=https://calebtrevatt.com/blog/getting-good/> <div class=nav-arrow>Next</div> <span class=post-title>Getting Good</span> </a></nav><span class=hidden id=copy-code-text>Copy Code</span><span class=hidden id=search-index>https://calebtrevatt.com/search_index.en.json</span><span class=hidden id=more-matches-text>$MATCHES more matches</span></main><footer id=site-footer><p>¬© Caleb Trevatt, 2025<ul id=socials><li><a rel=" me" href=https://github.com/in03 title=GitHub> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGitHub%3C/title%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E&#34)" class=icon></i> <span>GitHub</span> </a><li><a rel=" me" href=https://instagram.com/calebtrevatt title=Instagram> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EInstagram%3C/title%3E%3Cpath d='M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077'/%3E%3C/svg%3E&#34)" class=icon></i> <span>Instagram</span> </a><li><a rel=" me" href=https://twitter.com.caleb_trevatt title=Twitter> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ETwitter%3C/title%3E%3Cpath d='M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z'/%3E%3C/svg%3E&#34)" class=icon></i> <span>Twitter</span> </a></ul></footer>