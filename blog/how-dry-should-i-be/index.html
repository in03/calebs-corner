<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml><head><meta charset=UTF-8><meta content="A little corner of the internet where I write about things I'm learning." name=description><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#ff7800 name=theme-color><meta content=#ffa348 media=(prefers-color-scheme:dark) name=theme-color><title>How DRY should I be? - Caleb Trevatt</title><link href=https://calebtrevatt.com/blog/how-dry-should-i-be/ rel=canonical><link href=https://calebtrevatt.com/favicon.png rel=icon type=image/png><link href=https://calebtrevatt.com/apple-touch-icon.png rel=apple-touch-icon sizes=180x180 type=image/png><link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext x='-.07em' y='.89em' font-size='90'%3Eüë®‚Äçüíª%3C/text%3E%3C/svg%3E" rel=icon><link title="Caleb Trevatt - RSS Feed" href=https://calebtrevatt.com/rss.xml rel=alternate type=application/rss+xml><link title="Caleb Trevatt - Atom Feed" href=https://calebtrevatt.com/atom.xml rel=alternate type=application/atom+xml><style>:root{--accent-color:#ff7800;--contrast-color:#fff}[data-theme=dark]{--accent-color:#ffa348}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--accent-color:#ffa348}}[data-theme=dark]{--contrast-color:#000c}@media (prefers-color-scheme:dark){:root:not([data-theme=light]){--contrast-color:#000c}}</style><link href=https://calebtrevatt.com/style.css rel=stylesheet><link href=https://calebtrevatt.com/mods.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=https://calebtrevatt.com/syntax-theme-light.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=https://calebtrevatt.com/syntax-theme-dark.css rel=stylesheet><script defer src=https://calebtrevatt.com/closable.js></script><script defer src=https://calebtrevatt.com/copy-button.js></script><script defer src=https://calebtrevatt.com/fuse.js></script><script defer src=https://calebtrevatt.com/search-fuse.js></script><script defer src=https://calebtrevatt.com/theme-switcher.js></script><meta content="Caleb Trevatt" property=og:site_name><meta content="How DRY should I be? - Caleb Trevatt" property=og:title><meta content=https://calebtrevatt.com/blog/how-dry-should-i-be/ property=og:url><meta content="Quick thoughts on honesty and battling abstraction" property=og:description><meta content=https://calebtrevatt.com/processed_images/desert_dev.43a3fe12db230119.jpg property=og:image><meta content=en_US property=og:locale><body><header id=site-nav><nav><a href=#main-content tabindex=0> Skip to Main Content </a><ul><li id=home><a href=https://calebtrevatt.com> <i class=icon></i>Caleb Trevatt</a><li class=divider><li><a href=https://calebtrevatt.com/blog/>Posts</a><li><a href=https://calebtrevatt.com/snippets/>Snippets</a><li id=search><button class=circle id=search-toggle title=Search><i class=icon></i></button><li id=theme-switcher><details class=closable><summary class=circle title=Theme><i class=icon></i></summary> <ul><li><button title="Switch to Light Theme" class=circle id=theme-light><i class=icon></i></button><li><button title="Switch to Dark Theme" class=circle id=theme-dark><i class=icon></i></button><li><button title="Use System Theme" class=circle id=theme-system><i class=icon></i></button></ul></details><li id=feed><details class=closable><summary class=circle title=Feed><i class=icon></i></summary> <ul><li><a href=https://calebtrevatt.com/rss.xml>RSS</a><li><a href=https://calebtrevatt.com/atom.xml>Atom</a></ul></details><li id=repo><a class=circle href=https://github.com/in03/calebs-corner title=Repository> <i class=icon></i> </a></ul></nav><div id=search-container><label class=visually-hidden for=search-bar>Search</label><input placeholder="Search for‚Ä¶" autocomplete=off disabled id=search-bar type=search><div id=search-results-container><div id=search-results></div></div></div></header><main id=main-content><article><div id=banner-container><img class=full-bleed id=banner src=https://calebtrevatt.com/blog/how-dry-should-i-be/desert_dev.jpg></div><div id=heading><p><small> <time datetime=" 2024-06-20T00:00:00+00:00">Published on June 20, 2024</time></small><h1>How DRY should I be?</h1><p><small><span>17 minutes read</span><span> ‚Ä¢ </span></small><ul class=tags><li><a class=tag href=https://calebtrevatt.com/tags/ai/>AI</a><li><a class=tag href=https://calebtrevatt.com/tags/software-dev/>Software dev</a><li><a class=tag href=https://calebtrevatt.com/tags/quick-thoughts/>Quick thoughts</a></ul></div><div data-frameborder=no data-height=90 data-playerurl=https://elevenlabs.io/player/index.html data-publicuserid=58a370faa207aab914913711661d5e729f9ef9474fd25fa49a828517a41e3840 data-scrolling=no data-width=100% id=elevenlabs-audionative-widget>Loading the <a href=https://elevenlabs.io/text-to-speech rel=noopener target=_blank>Elevenlabs Text to Speech</a> AudioNative Player...</div><script src=https://elevenlabs.io/player/audioNativeHelper.js></script><div id=buttons-container><a title="Go to Top" href=#top id=go-to-top><i class=icon></i></a><a href="https://shareopenly.org/share/?url=https://calebtrevatt.com/blog/how-dry-should-i-be/&text=Quick%20thoughts%20on%20honesty%20and%20battling%20abstraction" id=share title=Share><i class=icon></i></a><a title="File an Issue" href=https://github.com/in03/calebs-corner/issues id=issue><i class=icon></i></a></div><h2 id=the-problem>The Problem</h2><p>I love writing abstractions.<p>It appeases my ‚Äúducks in a row‚Äù desires. It makes my code tidy and I feel like a pro calling my nifty functions. The problem is, it doesn‚Äôt take too long before I get backed into a corner and the tidiness unravels into spaghetti.<p>We‚Äôve all done this.<p>It feels great to make magic, but magic gets messy when you need to fix it. If you‚Äôre like me, you‚Äôll claim you‚Äôre not doing it for the magic by hiding behind the intelligent cause of staying DRY.<p>For the unfamiliar, DRY stands for Don‚Äôt Repeat Yourself. It‚Äôs a software development principle designed to reduce redudancy and maintainability issues.<p>In a nutshell:<ol><li><strong>Productivity</strong>: Writing logic once and reusing it reduces typing.<li><strong>Readability</strong>: Less code means less to read. And we read a lot more code than we write.<li><strong>Maintainability</strong>: Less code to read means less to fix when things go wrong.</ol><p>At least that‚Äôs how I understand it.<p>The term was first introduced in the book <em>The Pragmatic Programmer</em>, advocating:<blockquote><p>‚ÄúEvery piece of knowledge must have a single, unambiguous, authoritative representation within a system.‚Äù</blockquote><hr><p>I don‚Äôt know how, but maybe it‚Äôs just because its so simple‚Ä¶ This is the one thing I just innately <em>over</em>do. When I see those capital letters online, I feel like I‚Äôm around my people. They <strong>get</strong> me. It resonates with the same immature hype that the minimalist movement had. Clearly important elements of truth that people have either drastically under or over-actioned with no clear markers in place to measure effectiveness.<p>I‚Äôm going to be honest. I have not read the book‚Ä¶ maybe my understanding of DRY is incomplete or immature, but I‚Äôm going to hazard a guess that most people who ‚Äúpractice‚Äù DRY haven‚Äôt read it either, probably not even you.<p>I imagine if there is ‚Äútrue‚Äù nuanced DRY, most developers aren‚Äôt familiar with it.<p>So here‚Äôs my hot take.<p><strong>I don‚Äôt think programmers need any encouragement to be more DRY.</strong><p>Us programmers don‚Äôt like repeating ourselves. We work out pretty early that it‚Äôs easier to use functions and variables than it is to copy and paste code all over the place like 5 year old scrap-bookers.<p>We want elegance and flow; we like watching code dance for us. The problem is, if we don‚Äôt control that obsession, we end up dancing for the code.<h2 id=examples>Examples</h2><p>As soon as something becomes repetitive, we have the choice of leaving it in or reaching for an <em>abstraction</em>.<p>Abstraction #1: The Humble Variable.<pre class="language-Python z-code" data-lang=Python><code class=language-Python data-lang=Python><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Not very DRY
</span></span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">print</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">9</span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-constant z-numeric z-integer z-decimal z-python">10</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">log</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">debug</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">9</span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-constant z-numeric z-integer z-decimal z-python">10</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-constant z-numeric z-integer z-decimal z-python">21</span>
</span></code></pre><pre class="language-Python z-code" data-lang=Python><code class=language-Python data-lang=Python><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Variables!
</span></span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">message</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-constant z-numeric z-integer z-decimal z-python">9</span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-constant z-numeric z-integer z-decimal z-python">10</span>
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">print</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">a</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">log</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">debug</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">a</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-constant z-numeric z-integer z-decimal z-python">21</span>
</span><span class="z-source z-python">
</span></code></pre><p>Nice. It works. But eww. If we know we want to print and log for all sorts of code throughout the project, that‚Äôs gonna get repetitive. And it‚Äôs not very future proof if we want to send that output to more ‚Äúsinks‚Äù in the future. Say I have 26 <code>prints</code> to stdout throughout my code. What if I now want to add the feature to send a fax every time I print? (A perfectly reasonable goal).<p>I would have to update the code <strong>26 times</strong>. DRY says no!<p>I guess we could use a function?<pre class="language-Python z-code" data-lang=Python><code class=language-Python data-lang=Python><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">wuphf</span></span> </span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">message</span><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python"><span class="z-punctuation z-section z-function z-begin z-python">:</span></span>
</span><span class="z-source z-python"><span class="z-comment z-block z-documentation z-python"><span class="z-punctuation z-definition z-comment z-begin z-python">"""</span>
</span></span><span class="z-source z-python"><span class="z-comment z-block z-documentation z-python">Notify on all the services!
</span></span><span class="z-source z-python"><span class="z-comment z-block z-documentation z-python"><span class="z-punctuation z-definition z-comment z-end z-python">"""</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">print</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">message</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">log</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">debug</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">message</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">send_email</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">message</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">tweet</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">message</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">fax</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">message</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">wuphf</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">9</span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-constant z-numeric z-integer z-decimal z-python">10</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-constant z-numeric z-integer z-decimal z-python">21</span>
</span><span class="z-source z-python">
</span></code></pre><p>{{% videogif src=‚Äúwuphf.webm‚Äù %}}<p>Much better! Now my action is a single line function call that wraps five statements. I just saved myself 121 lines of code! Let the minimalist addiction kick in. Concise and maintainable.<p>But what if I need a little more flexibility? Maybe I don‚Äôt want to fax or tweet <em>every</em> time. Just most of the time. I don‚Äôt want to have to create another function called <code>wuphf_without_fax_and_tweet</code>. That‚Äôs clearly dumb. Let‚Äôs make our existing function more flexible.<pre class="language-Python z-code" data-lang=Python><code class=language-Python data-lang=Python><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-meta z-function z-python"><span class="z-storage z-type z-function z-python"><span class="z-keyword z-declaration z-function z-python">def</span></span> <span class="z-entity z-name z-function z-python"><span class="z-meta z-generic-name z-python">wuphf</span></span> </span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-begin z-python">(</span></span><span class="z-meta z-function z-parameters z-python"><span class="z-variable z-parameter z-python">m</span><span class="z-punctuation z-separator z-parameters z-python">,</span> <span class="z-variable z-parameter z-python">do_print</span></span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">true</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-separator z-parameters z-python">,</span> <span class="z-variable z-parameter z-python">do_log</span></span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">true</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-separator z-parameters z-python">,</span> <span class="z-variable z-parameter z-python">do_send_email</span></span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">true</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-separator z-parameters z-python">,</span> <span class="z-variable z-parameter z-python">do_tweet</span></span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">true</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-separator z-parameters z-python">,</span> <span class="z-variable z-parameter z-python">do_fax</span></span><span class="z-meta z-function z-parameters z-default-value z-python"><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">true</span></span></span><span class="z-meta z-function z-parameters z-python"><span class="z-punctuation z-section z-parameters z-end z-python">)</span></span><span class="z-meta z-function z-python">
</span></span><span class="z-source z-python"><span class="z-meta z-function z-python"></span><span class="z-comment z-block z-documentation z-python"><span class="z-punctuation z-definition z-comment z-begin z-python">"""</span>
</span></span><span class="z-source z-python"><span class="z-comment z-block z-documentation z-python">Now customisable!
</span></span><span class="z-source z-python"><span class="z-comment z-block z-documentation z-python"><span class="z-punctuation z-definition z-comment z-end z-python">"""</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">do_print</span></span><span class="z-punctuation z-section z-group z-end z-python">)</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</span><span class="z-source z-python">  <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">print</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">m</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">do_log</span></span><span class="z-punctuation z-section z-group z-end z-python">)</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</span><span class="z-source z-python">  <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">log</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">debug</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">m</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">do_send_email</span></span><span class="z-punctuation z-section z-group z-end z-python">)</span></span></span>
</span><span class="z-source z-python">  <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">send_email</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">m</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">do_tweet</span></span><span class="z-punctuation z-section z-group z-end z-python">)</span></span></span>
</span><span class="z-source z-python">  <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">tweet</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">m</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"> <span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-meta z-group z-python"><span class="z-punctuation z-section z-group z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">do_fax</span></span><span class="z-punctuation z-section z-group z-end z-python">)</span></span></span>
</span><span class="z-source z-python">  <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">fax</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">m</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">wuphf</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">9</span> <span class="z-keyword z-operator z-arithmetic z-python">+</span> <span class="z-constant z-numeric z-integer z-decimal z-python">10</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-constant z-numeric z-integer z-decimal z-python">21</span>
</span></code></pre><p>Now I‚Äôm really solving problems. Look at all the work I‚Äôve moved into the function ready for repeat use! My function only needs one mandatory argument. That‚Äôll keep my function calls concise.<p>But <em>ahem</em> as ‚Äúuseful‚Äù as our new function is, it‚Äôs a bit wordy itself. If we write a lot of functions like this, our file might be getting pretty chunky. I don‚Äôt want to see these utility functions shadowing out the rest of the business logic, now do I??<p>We need to get organised.<p>Let‚Äôs put it in another file out of the way somewhere and import it. We‚Äôre bound to add additional functions of a similar nature, they can just live in that module too. We may as well start moving any other wordy functions to their own modules and just have a tidy-up while we‚Äôre at it.<pre class="language-Python z-code" data-lang=Python><code class=language-Python data-lang=Python><span class="z-source z-python"><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">notifications</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">wuphf</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">wuphf</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-constant z-numeric z-integer z-decimal z-python">9</span><span class="z-keyword z-operator z-arithmetic z-python">+</span><span class="z-constant z-numeric z-integer z-decimal z-python">10</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-keyword z-operator z-comparison z-python">></span><span class="z-keyword z-operator z-comparison z-python">></span> <span class="z-constant z-numeric z-integer z-decimal z-python">21</span>
</span></code></pre><p>Done! Easy. Works great. Rinse-and-repeat as you please and your main script is going to look so tidy üëå<pre class="language-Python z-code" data-lang=Python><code class=language-Python data-lang=Python><span class="z-source z-python"><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">notifications</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">wuphf</span></span>
</span><span class="z-source z-python"><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">cli</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">app</span></span>
</span><span class="z-source z-python"><span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-from z-python">from</span></span><span class="z-meta z-statement z-import z-python"><span class="z-meta z-import-source z-python"> <span class="z-meta z-import-path z-python"><span class="z-meta z-import-name z-python">users</span></span> <span class="z-meta z-statement z-import z-python"><span class="z-keyword z-control z-import z-python">import</span></span></span></span><span class="z-meta z-statement z-import z-python"></span><span class="z-meta z-statement z-import z-python"> <span class="z-meta z-generic-name z-python">new_user</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> Prompt user
</span></span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">username</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">app</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">get_username</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">new_user</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">username</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">wuphf</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-storage z-type z-string z-python">f</span><span class="z-meta z-string z-interpolated z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">"</span></span></span><span class="z-meta z-string z-interpolated z-python"><span class="z-string z-quoted z-double z-python">New user added! '</span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-begin z-python">{</span><span class="z-source z-python z-embedded"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">username</span></span></span></span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-end z-python">}</span></span><span class="z-string z-quoted z-double z-python">'<span class="z-punctuation z-definition z-string z-end z-python">"</span></span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python">
</span></code></pre><h3 id=it-s-a-trap>It‚Äôs a Trap!</h3><p>This is obviously a silly example, but it illustrates a trap I honestly fall into:<ol><li>I abstract for repeat use<li>I add more functionality to the abstraction (uh, oh, function is no longer single responsibility)<li>I move similar functions into a module<li>I need more functionality but have to dance around to implement it.<li>I think I‚Äôve fixed it, but one fix somewhere causes a break somewhere else since there are so many calls to my now overcomplicated, fragile function.</ol><p>{{% videogif src=‚Äúleak.webm‚Äù%}}<p>If I knew I needed the flexibility of notifying to different services, I wouldn‚Äôt have done the abstraction like this to begin with. Functionality that should exist as statements in the main script now exists two layers deep.<p>Not that I‚Äôd wish <em>Notepad</em> on someone as an IDE, but‚Ä¶ good luck navigating without Intellisense. We haven‚Äôt even touched classes.<h3 id=stuck-with-the-cheque>Stuck with the Cheque</h3><p>Potential downsides of abstraction:<ul><li><p><strong>Complexity</strong>. Abstraction can turn simple code into a navigation nightmare. A code block becomes a function, then a file, then a module. Code functionality can become hidden deep in the codebase.</p><li><p><strong>Brittle</strong>. Abstractions can create unnecessary hoops to jump through in order to anticipate future needs that may never materialise. These hoops constrain the way we write code that interfaces with it. If the code that needs it can‚Äôt change, we end up having to change the abstraction and potentially any other code that‚Äôs already used it.</p><li><p><strong>Maintainability</strong>. Code that‚Äôs complex and brittle is already hard to work with. What about anyone in the future who has to work on that code? Can they learn it quickly? What about yourself in a weeks time?</p></ul><p>Premature abstraction is basically blind refactoring. We don‚Äôt want to refactor later when we have the facts, let‚Äôs refactor now without them!<h2 id=mitigation>Mitigation</h2><p>Alright, so too much DRY can lead to brittle abstractions. How do we find a good balance? Well, being aware is a good first step. Hopefully, you can analyse your own dev journey and see where you lie on that spectrum. You might be doing great and this is all for someone else.<p>But if this is for you, read on. Here‚Äôs a few things that have helped me.<h3 id=consider-abstraction-usefulness>Consider Abstraction Usefulness</h3><p>Be honest with yourself. Ask yourself these questions before you get your hands dirty:<ul><li><p>How likely are you to need this later?</p><li><p>Is there something more generic that does the job?</p> <ul><li>If so, exhaust those options before rolling your own!</ul><li><p>How nested is your code?</p><li><p>What do you gain in making a code block a function?</p><li><p>What do you gain in moving a set of functions into a class?</p><li><p>What do you gain in moving a set of functions/classes to a separate file (module, script, etc.)?</p></ul><h3 id=file-length>File Length</h3><p>Is your file getting too long? Are you tired of scrolling up and down so much?<p>To be honest, it probably isn‚Äôt too long.<ul><li><p>Are you using <a href=https://code.visualstudio.com/docs/editor/codebasics#_folding>code folding shortcuts</a> effectively? You can collapse by different levels of indentation. E.g. If you have a set of test functions defined at one indentation level in, you can fold all the function definitions into their titles with <code>ctrl/cmd + k, ctrl/cmd 1</code>. Each indentation level deeper is a higher number.</p><li><p>Are you using <a href=https://code.visualstudio.com/docs/editor/editingevolved#_peek>‚ÄúPeek‚Äù</a>? VS Code has an option to jump to function definitions from references to a function elsewhere (Go to Definition). It also allows the inverse, listing references from the definition itself (Go to References). Use <code>ctrl/cmd + left click</code> or <code>shift + F12</code> and <code>option + F12</code> respectively. Using Peek to perform these navigations gives you a little window to work with, so you can update a reference (or several) and not have the mental overhead of finding you way back to deal with.</p><li><p>Are you using <a href=https://stackoverflow.com/questions/35424367/how-can-i-navigate-back-to-the-last-cursor-position-in-visual-studio-code>cursor history navigation</a>? VS Code has a ‚ÄúGo forward‚Äù and ‚ÄúGo back‚Äù functionality for the cursor. If the Peek window isn‚Äôt enough and you just need more visual context, or hindsight is 20/20 and you need to go back somewhere that wasn‚Äôt a linked function definition/reference, you can navigate to where your cursor was last and back again.</p><li><p>Are you using <a href=https://code.visualstudio.com/docs/editor/editingevolved#_rename-symbol>‚ÄúRename Symbol‚Äù</a>? This one‚Äôs a stretch, but if you find the possibility of similar names causing rename conflict has you wanting to split your file, consider using Rename Symbol. If you need to change the name of a function or variable <em>everywhere</em> you might not want to change every instance of the word too. Say you have a function named, ‚Äúfile‚Äù, but you realise a little late that <code>file</code> is actually a built-in variable in your language that shouldn‚Äôt be overriden. If you run ‚Äúfind and replace‚Äù, every instance of that word will change, including instances of that built-in variable and any time you used the word ‚Äúfile‚Äù in inline comments or as part of a name in any other variables, function calls or methods, etc. Using Rename Symbol ensures you don‚Äôt mess with that other stuff.</p></ul><p>Learning how to navigate in your IDE efficiently will help prevent you from segregating your code out of navigation frustration. When you think you‚Äôve maxed out your ability to grasp navigation tools, if it feels like there‚Äôs too much going on in a file, then consider moving stuff.<p>If after some time you can see sections that have discrete responsibilities that you have not edited in a while, you can try moving them, but consider what you will lose and what you will gain carefully!<p>There‚Äôs plenty more to consider. Use the IDE‚Äôs outline, breadcrumbs, etc.<h3 id=code-complexity>Code Complexity</h3><p><a href=https://jellyfish.co/library/cyclomatic-complexity/>Cyclomatic complexity</a> is a metric that measures the complexity of a program by counting the number of linearly independent paths through a program‚Äôs source code.<p>Essentially, it‚Äôll help you keep yourself honest with stats that tell you when you‚Äôre a bad boy. Too many nested if statements in a single function, that sort of thing. It won‚Äôt help you with <a href=https://www.geeksforgeeks.org/separation-of-concerns-soc/>Separation of Concerns</a> (<a href=https://grugbrain.dev/#grug-on-soc>if that‚Äôs a principle you follow</a>), but it will help you with keeping complexity low. Unnecessary complexity is what makes a brittle abstraction.<p>If you‚Äôre using Python, consider using <a href=https://docs.astral.sh/ruff/configuration/>Ruff as your linter</a> (and formatter). It enables McCabe‚Äôs complexity rule for linting by default (c901). It‚Äôs written in Rust, is very fast and includes support for a lot of linting rules.<h3 id=snippets>Snippets</h3><p>Snippets are blocks of text that you can inject at your cursor. If we‚Äôre talking code, snippets are a great way to inject common code patterns. They offer a template for a common pattern, like looping or conditional statements.<p>I‚Äôve never much used snippets until recently.<p>I‚Äôve had to push through some mental friction in using them. Part of me feels if I use snippets, I‚Äôll forget how to write the code patterns they inject. It‚Äôs like trading memory-space; if I need to remember the name of a snippet and a keyboard shortcut for it, I‚Äôm going to forget the code pattern.<p>Fortunately, this isn‚Äôt true. How you get your code into the IDE matters a lot less than understanding what it does. Sometimes, I find myself staring at the flashing cursor with 10 different for-loop implementations fighting for my attention. Snippets help take this load off a bit.<p>Visual Studo Code has a built-in snippet feature that you can use to create snippets. There are also a heap of snippets published on the VSCode marketplace as extensions. When you insert a snippet in VSCode, you can tab through the required variables to quickly fill them out.<p>Other IDEs have similar implementations.<p>if you find youself needing snippets across IDEs, code editors in browsers or quickly in a terminal, consider using <a href=https://www.raycast.com>RayCast</a> if you‚Äôre on a Mac ‚Äì for a bunch of reasons, snippets being one. Raycast allows snippet injection globally, anywhere you can type. It also includes support for dynamic placeholders (variables). It goes beyond code. It‚Äôs handy for templating emails, Zendesk tickets, whatever you can think of.<p>I‚Äôve also used <a href=https://espanso.org/install/>Espanso</a>, <a href=https://www.keyboardmaestro.com/main/>KeyboardMaestro</a>, and <a href=https://www.autohotkey.com>AutoHotkey</a> on Windows. They all have their own unique features, but support snippets at a minimum.<h3 id=ai-assistance>AI Assistance</h3><p>AI Autocomplete is different. It often completes what I‚Äôm going to type and of course, I get to accept or deny the suggestion. This is one less cognitive hurdle compared to snippets, I‚Äôm not trading any mental real-estate to remember a trigger. It comes with the huge added benefit of being intelligent:<ul><li>You don‚Äôt need to add any snippets manually<li>Completions are fully dynamic, using the context of your file, repo or even whole codebase<li>Cycle through multiple suggestions if the first one doesn‚Äôt work</ul><p>I‚Äôve been using Sourcegraph‚Äôs Cody as an alternative to the non-free Github Copilot. I did some work on a frontend with react-form-json-schema and PowerShell as a backend (WILD stuff ‚Äì see the amazing <a href=https://docs.powershelluniversal.com>Powershell Universal</a> platform). Because the LLM was familiar with the larger react-form-json-schema project, it had no trouble translating that into my niche PowerShell codebase. All the form validation is in native PowerShell with very consistent <code>Test</code> functions for each field:<pre class="language-PowerShell z-code" data-lang=PowerShell><code class=language-PowerShell data-lang=PowerShell><span class="z-source z-powershell"><span class="z-meta z-function z-powershell"><span class="z-storage z-type z-powershell">function</span> <span class="z-entity z-name z-function z-powershell">Test-RequesterEmail</span></span> <span class="z-meta z-scriptblock z-powershell"><span class="z-punctuation z-section z-braces z-begin z-powershell">{</span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-keyword z-control z-powershell">param</span> <span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-interpolated z-simple z-source z-powershell">
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-interpolated z-simple z-source z-powershell">        <span class="z-meta z-attribute z-powershell"><span class="z-punctuation z-section z-bracket z-begin z-powershell">[</span><span class="z-support z-function z-attribute z-powershell">Parameter</span><span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-variable z-parameter z-attribute z-powershell">mandatory</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> <span class="z-constant z-language z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>True</span><span class="z-punctuation z-section z-group z-end z-powershell">)</span><span class="z-punctuation z-section z-bracket z-end z-powershell">]</span></span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-interpolated z-simple z-source z-powershell">        <span class="z-punctuation z-section z-bracket z-begin z-powershell">[</span><span class="z-storage z-type z-powershell">String</span><span class="z-punctuation z-section z-bracket z-end z-powershell">]</span><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-interpolated z-simple z-source z-powershell">    </span><span class="z-punctuation z-section z-group z-end z-powershell">)</span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> Get AD user<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>User</span> <span class="z-keyword z-operator z-assignment z-powershell">=</span> <span class="z-support z-function z-powershell">Get-ADUser</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Filter <span class="z-meta z-scriptblock z-powershell"><span class="z-punctuation z-section z-braces z-begin z-powershell">{</span>EmailAddress <span class="z-keyword z-operator z-comparison z-powershell">-eq</span> <span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span><span class="z-punctuation z-section z-braces z-end z-powershell">}</span></span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Properties EmailAddress<span class="z-keyword z-operator z-other z-powershell">,</span> DistinguishedName
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-support z-function z-powershell">Write-Host</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>DEBUG: AD User info: <span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>User</span><span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> Test domain address<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-keyword z-control z-powershell">If</span> <span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-interpolated z-simple z-source z-powershell"><span class="z-keyword z-operator z-logical z-powershell">-not</span> <span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>User</span></span><span class="z-punctuation z-section z-group z-end z-powershell">)</span> <span class="z-meta z-scriptblock z-powershell"><span class="z-punctuation z-section z-braces z-begin z-powershell">{</span> 
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-meta z-scriptblock z-powershell">        <span class="z-support z-function z-powershell">Write-Host</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>ERROR: Invalid! User '<span class="z-punctuation z-definition z-variable z-powershell">$</span><span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-interpolated z-complex z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span></span><span class="z-punctuation z-section z-group z-end z-powershell">)</span>' not registered in Active Directory.<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-meta z-scriptblock z-powershell">        <span class="z-keyword z-control z-powershell">return</span> <span class="z-support z-function z-powershell">New-ValidationResult</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Name <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>Requester Email<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Status <span class="z-constant z-language z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>False</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Message <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>'<span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span>' is not a valid XCompany email address.<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-punctuation z-section z-braces z-end z-powershell">}</span></span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> Test staff address<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-keyword z-control z-powershell">If</span> <span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-interpolated z-simple z-source z-powershell"><span class="z-keyword z-operator z-logical z-powershell">-not</span> <span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-interpolated z-simple z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>User<span class="z-variable z-other z-member z-powershell">.DistinguishedName</span></span> <span class="z-keyword z-operator z-comparison z-powershell">-match</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>OU=XCompany Staff<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span></span><span class="z-punctuation z-section z-group z-end z-powershell">)</span></span><span class="z-punctuation z-section z-group z-end z-powershell">)</span><span class="z-meta z-scriptblock z-powershell"><span class="z-punctuation z-section z-braces z-begin z-powershell">{</span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-meta z-scriptblock z-powershell">        <span class="z-support z-function z-powershell">Write-Host</span> <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>ERROR: Invalid! User '<span class="z-punctuation z-definition z-variable z-powershell">$</span><span class="z-punctuation z-section z-group z-begin z-powershell">(</span><span class="z-interpolated z-complex z-source z-powershell"><span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span></span><span class="z-punctuation z-section z-group z-end z-powershell">)</span>' is not in <span class="z-constant z-character z-escape z-powershell">""</span>Staff<span class="z-constant z-character z-escape z-powershell">""</span> OU.<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-meta z-scriptblock z-powershell">        <span class="z-keyword z-control z-powershell">return</span> <span class="z-support z-function z-powershell">New-ValidationResult</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Name <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>Requester Email<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Status <span class="z-constant z-language z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>False</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Message <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>'<span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span>' is not a valid staff email address.<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-punctuation z-section z-braces z-end z-powershell">}</span></span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell">    <span class="z-keyword z-control z-powershell">return</span> <span class="z-support z-function z-powershell">New-ValidationResult</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Name <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>Requester Email<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Status <span class="z-constant z-language z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>True</span> <span class="z-keyword z-operator z-assignment z-powershell">-</span>Message <span class="z-string z-quoted z-double z-powershell"><span class="z-punctuation z-definition z-string z-begin z-powershell">"</span>'<span class="z-variable z-other z-readwrite z-powershell"><span class="z-punctuation z-definition z-variable z-powershell">$</span>RequesterEmail</span>' is a valid XCompany staff email address.<span class="z-punctuation z-definition z-string z-end z-powershell">"</span></span>
</span></span><span class="z-source z-powershell"><span class="z-meta z-scriptblock z-powershell"><span class="z-punctuation z-section z-braces z-end z-powershell">}</span></span>
</span></code></pre><p>After writing a couple of these validation functions, Cody pretty much did the rest. All my fields were defined in the schema. Cody pre-empted each line I needed. Even the comments. It even replicated my weird <code>Write-Host</code> stuff with ‚ÄúERROR‚Äù and ‚ÄúINFO‚Äù prefixes (PU sends <code>Write-Host</code> to the browser console, but not <code>Write-Debug/Info/Error</code>).<p>If your code is predictable enough, you may find AI autocomplete does a fine job of anticipating your structure. This in a way is a good marker of your consistency as a programmer. If you find it anticipating your code well, you might find that the mental strain of yourself anticipating your code is also lowered.<p>AI isn‚Äôt always going to have the completions you want, but it is a step up from snippets for cutting through the tedium. Just be aware that when you don‚Äôt want a suggestion it can be a bit of a nuisance and suggest a completiion if you pause for too long. In my opinion, this is more annoying than you‚Äôd think. If you struggle with maintaining a train-of-thought, unwanted completions will derail you quicker.<p>Regarding DRY itself, if you find a block of code you think could be more concise, ask Cody to rewrite it. See what it suggests.<h2 id=ai-prompting>AI prompting</h2><p>We‚Äôre all familiar with ChatGPT by now.<p>The most recent model GPT-4O has really impressed me. I‚Äôve received some great working code examples from it that just worked out-of-the-box. The Powershell Universal project above, it‚Äôs all in one file, 400 lines of code. I pasted that into ChatGPT and asked for a few changes and it sent it right back, changes applied. It actually became more convenient to ask for changes I knew how to make directly within ChatGPT itself. By the time I could make the necessary modifications to the <code>FormSchema</code>, <code>UISchema</code> and ‚ÄúTest‚Äù functions myself, ChatGPT would‚Äôve finished writing the whole script out again from scratch.<p>I‚Äôm excited to see more convenient coding workflows pop up.<p>Consider <a href=https://sourcegraph.com/cody>Cody</a>, <a href=https://chatgpt.com>ChatGPT</a>, <a href=https://github.com/features/copilot>GitHub Copilot</a>, <a href=https://groq.com>Groq</a>, <a href=https://ollama.com>Ollama</a> and <a href=https://github.com/charmbracelet/mods>Mods</a> to name a few AI tools‚Ä¶ and <a href=https://www.trycursor.com>Cursor</a>, for an AI first IDE. This seems to be getting better by the day.<h3 id=environments>Environments</h3><p>Consider your production and development environments. How will it deal with your abstractions? Is it going to play with a modular codebase nicely? Environments can be the difference between a project building successfully or not. If manual changes to the code are required to deploy in common environments, merging upstream changes from git gets messy. This is not a fun experience for your users.<ul><li><p>Portainer has a great GitOps style integration for its Stacks feature. It works great with a <code>docker-compose.yaml</code> and <code>.env</code>, but it won‚Äôt easily handle sidecar yaml configs or a <code>docker-compose.override.yaml</code>. Does the configuration need to be abstracted into multiple files?</p><li><p>Powershell Universal has an internal repo that is not designed for manual updates because of the way file-watching works to reload downstream services. Creating and importing modules can get a bit prickly without proper planning.</p><li><p>Application hosting services like Fly.io expect a certain file structure. Keeping your code in line with recommendations might be important to prevent refactoring later.</p><li><p>Can your planned abstractions be used later in this codebase? How about in future projects?</p><li><p>Can you release code in a way to make abstractions more compatible?</p></ul><h3 id=frameworks-libraries-and-other-dependencies>Frameworks, Libraries and other Dependencies</h3><p>This one takes good judgement. Both of the follwing statements are true:<ul><li>The <strong>best</strong> kind of abstractions to work with are ones you didn‚Äôt write<li>The <strong>worst</strong> kind of abstractions to work with are ones you didn‚Äôt write</ul><p>Provided you are careful about the dependencies you choose, you can find yourself with a featureful set of abstractions that are well scoped, well planned, maintained, secure, rarely include breaking changes and have a healthy community happy to support.<p>Nothing lasts forever, but good dependencies should outlast your own projects. When choosing dependencies, check:<ul><li><p>It doesn‚Äôt do too much.</p> <ul><li>Depedencies that do too much become a greater risk to your code if they become unmaintained.<li>Poor scoping may also be indicative of poor planning and more difficult maintenance.</ul><li><p>Maintainer engagement.</p> <ul><li>Are issues responded to in a timely manner?<li>Are pull requests reviewed?<li>Are new features added?</ul><li><p>It has a healthy community.</p> <ul><li>Are users asking questions and getting answers from the community?<li>Is there a dedicated place for discussion?<li>Is the community engaged with the direction of the project?</ul><li><p>It‚Äôs mature.</p> <ul><li>Does it use semantic versioning?<li>Are they in Alpha/Beta or Release Candidate stages?<li>Have they released a 1.0.0 version yet?<li>Is the project prone to breaking changes?<li>Linters? Formatters? CI/CD workflows?<li>What sort of tooling is used for development?</ul><li><p>Documentation.</p> <ul><li>Is the code well documented?<li>Is the code well commented?<li>Is there lag between the main branch and docs?</ul><li><p>Source Code.</p> <ul><li>Is the code well structured?<li>Do you understand it?<li>Could you confidently make contributions to it if you needed to?<li>How much code is there?<li>How abstract is it? üòè</ul></ul><p>Rolling-your-own has maintainability implications, but at the end of the day, it‚Äôs code you wrote and understand. Vulnerabilities in that code won‚Äôt go away unless you fix them, but you‚Äôll be safe from <a href=https://attack.mitre.org/techniques/T1195/>supply chain attacks</a>.<p>Dependencies come with whatever their maintainers decide to put in their code. A healthy open-source community may detect and mitigate security vulnerabilities, fix bugs, add docs and maybe even introduce new features. An unhealthy community can lead to stagnant, vulnerable, out-of-date code that may even stop working with other dependencies or language versions.<p>Choose wisely!</article><hr><nav id=post-nav><a class="post-nav-item post-nav-prev" href=https://calebtrevatt.com/blog/getting-good/> <div class=nav-arrow>Previous</div> <span class=post-title>Getting Good</span> </a><a class="post-nav-item post-nav-next" href=https://calebtrevatt.com/blog/how-to-blog/> <div class=nav-arrow>Next</div> <span class=post-title>I think I might suck at blogging...</span> </a></nav><span class=hidden id=copy-code-text>Copy Code</span><span class=hidden id=search-index>https://calebtrevatt.com/search_index.en.json</span><span class=hidden id=more-matches-text>$MATCHES more matches</span></main><footer id=site-footer><p>¬© Caleb Trevatt, 2025<ul id=socials><li><a rel=" me" href=https://github.com/in03 title=GitHub> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EGitHub%3C/title%3E%3Cpath d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E&#34)" class=icon></i> <span>GitHub</span> </a><li><a rel=" me" href=https://instagram.com/calebtrevatt title=Instagram> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3EInstagram%3C/title%3E%3Cpath d='M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077'/%3E%3C/svg%3E&#34)" class=icon></i> <span>Instagram</span> </a><li><a rel=" me" href=https://twitter.com.caleb_trevatt title=Twitter> <i style="--icon:url(&#34data:image/svg+xml,%3Csvg role='img' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ETwitter%3C/title%3E%3Cpath d='M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z'/%3E%3C/svg%3E&#34)" class=icon></i> <span>Twitter</span> </a></ul></footer>